{"version":3,"sources":["utils.js","WebAPI.js","contexts.js","pages/LoginPage/LoginPage.js","pages/HomePage/HomePage.js","pages/RegisterPage/RegisterPage.js","pages/AboutPage/AboutPage.js","pages/SinglePage/SinglePage.js","pages/NewPostPage/NewPostPage.js","components/Header/Header.js","components/App/App.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","getMe","fetch","headers","authorization","then","res","json","AuthContext","createContext","ErrorMessage","styled","div","Form","form","Input","input","Button","button","LoginPage","setUser","useContext","useState","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","onSubmit","e","preventDefault","method","body","JSON","stringify","login","data","ok","message","response","toString","push","value","onChange","target","type","Root","PostWrapper","PostContainer","PostTitle","Link","PostDate","PaginationContainer","PaginationInfo","PaginationButton","Post","post","to","id","title","Date","createdAt","toLocaleString","Pagination","setCurrentPage","currentPage","totoalPages","handleButtonClick","page","innerText","Number","length","onClick","HomePage","posts","setPosts","setTotalPages","useEffect","total","Math","ceil","i","limit","pagingPosts","map","nickname","setNickname","register","About","AboutPage","PostHeader","PostBody","SinglePage","slug","useParams","setPost","Textarea","textarea","NewPostPage","setTitle","content","setContent","newPost","cols","rows","HeaderContainer","Brand","NavbarList","Nav","props","$active","LeftContainer","Header","location","useLocation","user","pathname","App","Provider","exact","path","ReactDOM","render","theme","colors","primary_300","primary_400","primary_500","document","getElementById"],"mappings":"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","file":"static/js/main.d66b6aba.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\n","import { getAuthToken } from \"./utils\";\n\nconst BASE_URL = \"https://student-json-api.lidemy.me\";\n\nexport const pagingPosts = (page, limit) => {\n  return fetch(\n    `${BASE_URL}/posts?_sort=createdAt&_order=desc&_page=${page}&_limit=${limit}`\n  ).then((res) => res.json());\n};\n\nexport const getPosts = () => {\n  return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc`).then((res) =>\n    res.json()\n  );\n};\n\nexport const getPost = (id) => {\n  return fetch(`${BASE_URL}/posts/${id}`).then((res) => res.json());\n};\n\nexport const newPost = (title, body) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const login = (username, password) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const getMe = () => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/me`, {\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n  }).then((res) => res.json());\n};\n\nexport const register = (username, nickname, password) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      nickname,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null);\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { login, getMe } from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\n\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  text-align: center;\n  border: 5px solid #ec8c9b;\n  width: 500px;\n  margin: 60px auto 0;\n  padding: 30px 0;\n  border-radius: 3px;\n`;\n\nconst Input = styled.input`\n  margin: 10px 0;\n  width: 200px;\n  height: 25px;\n  border-radius: 3px;\n  border: 1px solid #8ce7ec;\n`;\n\nconst Button = styled.button`\n  margin-top: 20px;\n  cursor: pointer;\n  width: 200px;\n  height: 30px;\n  border-radius: 5px;\n  border: 1px solid transparent;\n  background-color: #8ce7ec;\n  :hover {\n    background-color: #000000de;\n    border: 1px solid transparent;\n    border-radius: 5px;\n    color: #ec8c9b;\n  }\n`;\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    login(username, password).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message);\n      }\n      setAuthToken(data.token);\n\n      getMe().then((response) => {\n        if (response.ok !== 1) {\n          setAuthToken(null);\n          return setErrorMessage(response.toString());\n        }\n        setUser(response.data);\n        history.push(\"/\");\n      });\n    });\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        username:{\" \"}\n        <Input value={username} onChange={(e) => setUsername(e.target.value)} />\n      </div>\n      <div>\n        password:{\" \"}\n        <Input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n      </div>\n      <Button>登入</Button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { getPosts, pagingPosts } from \"../../WebAPI\";\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst PostWrapper = styled.div`\n  height: 70vh;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid #f09fac;\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nconst PaginationContainer = styled.div`\n  margin: 30px 0;\n  text-align: center;\n`;\n\nconst PaginationInfo = styled.div`\n  padding-top: 10px;\n`;\n\nconst PaginationButton = styled.button`\n  cursor: pointer;\n  width: 150px;\n  height: 30px;\n  border-radius: 5px;\n  border: 1px solid transparent;\n  background-color: pink;\n\n  & + & {\n    margin-left: 5px;\n  }\n  :hover {\n    background-color: #000000de;\n    border: 1px solid transparent;\n    border-radius: 5px;\n    color: #ec8c9b;\n  }\n`;\n\nfunction Post({ post }) {\n  return (\n    <PostContainer>\n      <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n    </PostContainer>\n  );\n}\n\nfunction Pagination({ setCurrentPage, currentPage, totoalPages }) {\n  const handleButtonClick = (e) => {\n    const page = e.target.innerText;\n    if (page === \"prev\" && currentPage >= \"2\") {\n      return setCurrentPage(Number(currentPage) - 1);\n    }\n    if (page === \"next\" && Number(currentPage) !== totoalPages.length) {\n      return setCurrentPage(Number(currentPage) + 1);\n    }\n    if (page === \"first\") {\n      return setCurrentPage(1);\n    }\n    if (page === \"last\") {\n      return setCurrentPage(totoalPages.length);\n    }\n    if (page !== \"prev\" && page !== \"next\") {\n      return setCurrentPage(page);\n    }\n  };\n  return (\n    <PaginationContainer>\n      <PaginationButton onClick={handleButtonClick}>first</PaginationButton>\n      <PaginationButton onClick={handleButtonClick}>prev</PaginationButton>\n      <PaginationButton onClick={handleButtonClick}>next</PaginationButton>\n      <PaginationButton onClick={handleButtonClick}>last</PaginationButton>\n      <PaginationInfo>\n        第 {currentPage} 頁 / 共 {totoalPages.length} 頁\n      </PaginationInfo>\n    </PaginationContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n  const [currentPage, setCurrentPage] = useState(\"1\");\n  const [totoalPages, setTotalPages] = useState([]);\n  const limit = 5;\n\n  useEffect(() => {\n    getPosts().then((posts) => {\n      const total = Math.ceil(posts.length / limit);\n      for (let i = 1; i < total; i++) {\n        setTotalPages((totoalPages) => [...totoalPages, i]);\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    pagingPosts(currentPage, limit).then((posts) => setPosts(posts));\n  }, [currentPage]);\n\n  return (\n    <Root>\n      <PostWrapper>\n        {posts.map((post) => (\n          <Post key={post.id} post={post} />\n        ))}\n      </PostWrapper>\n      <Pagination\n        setCurrentPage={setCurrentPage}\n        currentPage={currentPage}\n        totoalPages={totoalPages}\n      />\n    </Root>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { register, getMe } from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\n\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  text-align: center;\n  border: 5px solid #ec8c9b;\n  width: 500px;\n  margin: 60px auto 0;\n  padding: 30px 0;\n  border-radius: 3px;\n`;\n\nconst Input = styled.input`\n  margin: 10px 0;\n  width: 200px;\n  height: 25px;\n  border-radius: 3px;\n  border: 1px solid #8ce7ec;\n`;\n\nconst Button = styled.button`\n  margin-top: 20px;\n  cursor: pointer;\n  width: 200px;\n  height: 30px;\n  border-radius: 5px;\n  border: 1px solid transparent;\n  background-color: #8ce7ec;\n  :hover {\n    background-color: #000000de;\n    border: 1px solid transparent;\n    border-radius: 5px;\n    color: #ec8c9b;\n  }\n`;\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext);\n  const [username, setUsername] = useState(\"\");\n  const [nickname, setNickname] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    register(username, nickname, password).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message);\n      }\n      getMe().then((response) => {\n        if (response.ok !== 1) {\n          setAuthToken(null);\n          return setErrorMessage(response.toString());\n        }\n        setUser(response.data);\n        history.push(\"/\");\n      });\n    });\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        username:{\" \"}\n        <Input value={username} onChange={(e) => setUsername(e.target.value)} />\n      </div>\n      <div>\n        nickname:{\" \"}\n        <Input value={nickname} onChange={(e) => setNickname(e.target.value)} />\n      </div>\n      <div>\n        password:{\" \"}\n        <Input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n      </div>\n      <Button>註冊</Button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Root = styled.div`\n  width: 60%;\n  margin: 10px auto;\n`;\n\nconst About = styled.div`\n  font-size: 20px;\n  margin: 25px;\n`;\n\nexport default function AboutPage() {\n  return (\n    <Root>\n      <About>\n        第一個 React 技術部落格，小小菜鳥，請各位多多指教!\n        歡迎大家一同寫技術文章。\n      </About>\n    </Root>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useParams } from \"react-router-dom\";\nimport { getPost } from \"../../WebAPI\";\n\nconst PostContainer = styled.div`\n  width: 80%;\n  margin: 30px auto;\n  border-bottom: 1px solid #f09fac;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PostHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 25px 0;\n  font-weight: bold;\n`;\n\nconst PostTitle = styled.div`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nconst PostBody = styled.div`\n  color: rgba(0, 0, 0, 1);\n`;\n\nexport default function SinglePage() {\n  let { slug } = useParams();\n  const [post, setPost] = useState();\n\n  useEffect(() => {\n    getPost(slug).then((post) => setPost(post));\n  }, [slug]);\n\n  return (\n    <div>\n      {post && (\n        <PostContainer>\n          <PostHeader>\n            <PostTitle>{post.title}</PostTitle>\n            <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n          </PostHeader>\n          <PostBody>{post.body}</PostBody>\n        </PostContainer>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { newPost } from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\n\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\nconst Form = styled.div`\n  text-align: center;\n  margin-top: 30px;\n`;\nconst Input = styled.input`\n  width: 400px;\n  height: 30px;\n  border: 1px solid #f09fac;\n  border-radius: 3px;\n`;\n\nconst Textarea = styled.textarea`\n  margin: 10px 0;\n  border: 1px solid #f09fac;\n  border-radius: 3px;\n`;\n\nconst Button = styled.button`\n  background-color: pink;\n  border: 1px solid transparent;\n  border-radius: 5px;\n  width: 300px;\n  height: 35px;\n  cursor: pointer;\n  :hover {\n    background-color: #000000de;\n    border: 1px solid transparent;\n    border-radius: 5px;\n    color: #ec8c9b;\n  }\n`;\n\nexport default function NewPostPage() {\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    newPost(title, content).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message);\n      }\n      history.push(\"/\");\n    });\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        標題: <Input value={title} onChange={(e) => setTitle(e.target.value)} />\n      </div>\n      <div>\n        <Textarea\n          cols=\"55\"\n          rows=\"20\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n        />\n      </div>\n      <Button>送出</Button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\n\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\n\nconst HeaderContainer = styled.div`\n  height: 64px;\n  display: flex;\n  justify-content: space-space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid #f09fac;\n  padding: 0 32px;\n  box-sizing: border-box;\n  background-color: white;\n`;\n\nconst Brand = styled.div`\n  font-size: 32px;\n  font-weight: bold;\n`;\n\nconst NavbarList = styled.div`\n  display: flex;\n  align-items: center;\n  height: 64px;\n`;\n\nconst Nav = styled(Link)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100px;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ${(props) =>\n    props.$active &&\n    `\n    background: #f8ccd3\n  `}\n`;\n\nconst LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${NavbarList} {\n    margin-left: 64px;\n  }\n`;\n\nexport default function Header() {\n  const location = useLocation();\n  const history = useHistory();\n  const { user, setUser } = useContext(AuthContext);\n\n  const handleLogout = () => {\n    setAuthToken(\"\");\n    setUser(null);\n    if (location.pathname !== \"/\") {\n      history.push(\"/\");\n    }\n  };\n  return (\n    <HeaderContainer>\n      <LeftContainer>\n        <Brand>Miao Blog</Brand>\n        <NavbarList>\n          <Nav to=\"/\" $active={location.pathname === \"/\"}>\n            首頁\n          </Nav>\n          <Nav to=\"/about\" $active={location.pathname === \"/about\"}>\n            關於我\n          </Nav>\n          {user && (\n            <Nav to=\"/new-post\" $active={location.pathname === \"/new-post\"}>\n              發布文章\n            </Nav>\n          )}\n        </NavbarList>\n      </LeftContainer>\n      <NavbarList>\n        {!user && (\n          <Nav to=\"/login\" $active={location.pathname === \"/login\"}>\n            登入\n          </Nav>\n        )}\n        {!user && (\n          <Nav to=\"/register\" $active={location.pathname === \"/register\"}>\n            註冊\n          </Nav>\n        )}\n        {user && <Nav onClick={handleLogout}>登出</Nav>}\n      </NavbarList>\n    </HeaderContainer>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport LoginPage from \"../../pages/LoginPage\";\nimport HomePage from \"../../pages/HomePage\";\nimport RegisterPage from \"../../pages/RegisterPage\";\nimport AboutPage from \"../../pages/AboutPage\";\nimport SinglePage from \"../../pages/SinglePage\";\nimport NewPostPage from \"../../pages/NewPostPage\";\nimport Header from \"../Header\";\nimport { getMe } from \"../../WebAPI\";\nimport { AuthContext } from \"../../contexts\";\n\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\n\nconst Root = styled.div`\n  padding-top: 64px;\n  background: #eecfd438;\n  width: 100%;\n  height: 100vh;\n`;\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    getMe().then((response) => {\n      if (response.ok) {\n        setUser(response.data);\n      }\n    });\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ user, setUser }}>\n      <Root>\n        <Router>\n          <Header />\n          <Switch>\n            <Route exact path=\"/\">\n              <HomePage />\n            </Route>\n            <Route exact path=\"/posts/:slug\">\n              <SinglePage />\n            </Route>\n            <Route path=\"/new-post\">\n              <NewPostPage />\n            </Route>\n            <Route path=\"/about\">\n              <AboutPage />\n            </Route>\n            <Route path=\"/login\">\n              <LoginPage />\n            </Route>\n            <Route path=\"/register\">\n              <RegisterPage />\n            </Route>\n          </Switch>\n        </Router>\n      </Root>\n    </AuthContext.Provider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport { ThemeProvider } from \"styled-components\";\n\nconst theme = {\n  colors: {\n    primary_300: \"#3333dd\",\n    primary_400: \"#e33e3e\",\n    primary_500: \"#af0505\",\n  },\n};\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <App />\n  </ThemeProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}